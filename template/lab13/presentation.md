---
## Front matter
lang: ru-RU
title: Лабораторная работа №13
subtitle: Настройка NFS
author:
  - Спелов А. Н.
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 27 ноября 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'

## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Спелов Андрей Николаевич
  * НПИбд-02-23 Студ. билет: 1132231839
  * Российский университет дружбы народов
  * [1132231839@pfur.ru](mailto:1132231839@pfur.ru)

:::
::: {.column width="30%"}
:::
::::::::::::::

# Вводная часть

## Цель работы

- Целью данной работы является приобретение навыков настройки сервера NFS для удалённого доступа к ресурсам.

# Основная часть

## Настройка сервера NFSv4

- Установка на сервере программного обеспечения nfs-utils.

![](./image/1.png)

## Настройка сервера NFSv4

- Создание на сервере каталога, который предполагается сделать доступным всем пользователям сети (корень дерева NFS).

![](./image/2.png)

## Настройка сервера NFSv4

- Прописывание в файле /etc/exports подключаемого через NFS общего каталога с доступом только на чтение.

![](./image/3.png)

## Настройка сервера NFSv4

- Настройка для общего каталога контекста безопасности NFS, применение изменённой настройки SELinux к файловой системе, запуск сервера NFS и настройка межсетевого экрана для работы сервера NFS.

![](./image/4.png)

## Настройка сервера NFSv4

- Установка на клиенте программного обеспечения для работы NFS.

![](./image/5.png)

## Настройка сервера NFSv4

- Попытка просмотреть на клиенте имеющихся подмонтированных удалённых ресурсов.

![](./image/6.png)

## Настройка сервера NFSv4

- Попытка остановить на сервере сервис межсетевого экрана.

![](./image/7.png)

## Настройка сервера NFSv4

- Повторная попытка подключения к удалённо смонтированному ресурсу.

![](./image/8.png)

## Настройка сервера NFSv4

- Запуск на сервере сервиса межсетевого экрана.

![](./image/9.png)

## Настройка сервера NFSv4

- Просмотр на сервере служб, задействованных при удалённом монтировании (TCP).

![](./image/10.png)

## Настройка сервера NFSv4

- Просмотр на сервере служб, задействованных при удалённом монтировании (UDP).

![](./image/11.png)

## Настройка сервера NFSv4

- Добавление службы rpc-bind и mountd в настройки межсетевого экрана на сервере.

![](./image/12.png)

## Настройка сервера NFSv4

- Проверка на клиенте подключения удалённого ресурса.

![](./image/13.png)

## Монтирование NFS на клиенте

- Создание на клиенте каталога, в который будет монтироваться удалённый ресурс, и монтироваться дерево NFS. Проверка, что общий ресурс NFS подключён правильно.

![](./image/14.png)

## Монтирование NFS на клиенте

- Добавление на клиенте в конце файла /etc/fstab записи.

![](./image/15.png)

## Монтирование NFS на клиенте

- Проверка на клиенте наличия автоматического монтирования удалённых ресурсов при запуске операционной системы.

![](./image/16.png)

## Подключение каталогов к дереву NFS

- Создание на сервере общего каталога, в который затем будет подмонтирован каталог с контентом веб-сервера. Монтирование каталога web-сервера и проверка, что отображается в каталоге /srv/nfs.

![](./image/17.png)

## Подключение каталогов к дереву NFS

- Просмотр на клиенте содержимого каталога /mnt/nfs.

![](./image/18.png)

## Подключение каталогов к дереву NFS

- Добавление на сервере в файле /etc/exports экспорта каталога веб-сервера с удалённого ресурса.

![](./image/19.png)

## Подключение каталогов к дереву NFS

- Экспорт всех каталогов, упомянутых в файле /etc/exports.

![](./image/20.png)

## Подключение каталогов к дереву NFS

- Проверка на клиенте каталога /mnt/nfs.

![](./image/21.png)

## Подключение каталогов к дереву NFS

- Добавление на сервере в конце файла /etc/fstab записи.

![](./image/22.png)

## Подключение каталогов к дереву NFS

- Повторный экспорт каталогов, указанных в файле /etc/exports.

![](./image/23.png)

## Подключение каталогов к дереву NFS

- Проверка на клиенте каталога /mnt/nfs.

![](./image/24.png)

## Подключение каталогов для работы пользователей

- Создание на сервере под пользователем anspelov в домашнем каталоге каталога common с полными правами доступа только для этого пользователя, а в нём файл anspelov@server.txt. Создание общего каталога для работы пользователя anspelov по сети и монтирование каталога common пользователя anspelov в NFS.

![](./image/25.png)

## Подключение каталогов для работы пользователей

- Подключение каталога пользователя в файле /etc/exports.

![](./image/26.png)

## Подключение каталогов для работы пользователей

- Внесение изменения в файл /etc/fstab.

![](./image/27.png)

## Подключение каталогов для работы пользователей

- Повторный экспорт каталогов.

![](./image/28.png)

## Подключение каталогов для работы пользователей

- Проверка на клиенте каталога /mnt/nfs.

![](./image/29.png)

## Подключение каталогов для работы пользователей

- Переход на клиенте под пользователем anspelov в каталог /mnt/nfs/home/anspelov и попытка создать в нём файл anspelov@client.txt.

![](./image/30.png)

## Подключение каталогов для работы пользователей

- Переход на клиенте под пользователем root в каталог /mnt/nfs/home/anspelov и попытка создать в нём файл anspelov@client.txt.

![](./image/31.png)

## Подключение каталогов для работы пользователей

- Просмотр наличия изменений на сервере в каталоге пользователя /home/anspelov/common.

![](./image/32.png)

## Внесение изменений в настройки внутреннего окружения виртуальных машин

- Переход на виртуальной машине server в каталог для внесения изменений в настройки внутреннего окружения /vagrant/provision/server/, создание в нём каталога nfs, в который помещаем в соответствующие подкаталоги конфигурационные файлы. Создание в каталоге /vagrant/provision/server исполняемого файла nfs.sh.

![](./image/33.png)

## Внесение изменений в настройки внутреннего окружения виртуальных машин

- Открытие файла на редактирование и добавление скрипта.

![](./image/34.png)

## Внесение изменений в настройки внутреннего окружения виртуальных машин

- Переход на виртуальной машине client в каталог для внесения изменений в настройки внутреннего окружения /vagrant/provision/client/. Создание в каталоге /vagrant/provision/client исполняемого файла nfs.sh.

![](./image/35.png)

## Внесение изменений в настройки внутреннего окружения виртуальных машин

- Открытие файла на редактирование и добавление скрипта.

![](./image/36.png)

## Внесение изменений в настройки внутреннего окружения виртуальных машин

- Добавление записи в конфигурационном файле Vagrantfile для сервера и клиента.

![](./image/37.png)

# Вывод

## Вывод

- В ходе выполнения лабораторной работы были приобретены навыки настройки сервера NFS для удалённого доступа к ресурсам.