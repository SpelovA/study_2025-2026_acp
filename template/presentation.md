---
## Front matter
lang: ru-RU
title: Лабораторная работа №8
subtitle: Настройка SMTP-сервера
author:
  - Спелов А. Н.
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 24 октября 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'

## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Спелов Андрей Николаевич
  * НПИбд-02-23 Студ. билет: 1132231839
  * Российский университет дружбы народов
  * [1132231839@pfur.ru](mailto:1132231839@pfur.ru)

:::
::: {.column width="30%"}
:::
::::::::::::::

# Вводная часть

## Цель работы

- Целью данной работы является приобретение практических навыков по установке и конфигурированию SMTPсервера.

# Основная часть

## Установка Postfix

- Открытие режима суперпользователя и установка пакета postfix.

![](./image/1.png)

## Установка Postfix

- Конфигурирование межсетевого экрана, разрешив работать службе протокола SMTP. Восстановление контекста безопасности в SELinux и запуск Postfix.

![](./image/2.png)

## Изменение параметров Postfix с помощью postconf

- Просмотр списка текущих настроек Postfix, текущего значения параметра myorigin и текущего значения параметра mydomain. Замена значения параметра myorigin на значение параметра mydomain и выполнение проверки.

![](./image/3.png)

## Изменение параметров Postfix с помощью postconf

- Проверка корректности содержания конфигурационного файла main.cf, перезагрузка конфигурационных файлов Postfix и просмотр всех параметров с значением, отличным от значения по умолчанию. 

![](./image/4.png)

## Изменение параметров Postfix с помощью postconf

- Задаём жёстко значение домена, отключение IPv6 в списке разрешённых в работе Postfix протоколов и оставление только IPv4, перезагрузка конфигурации Postfix.

![](./image/5.png)

## Проверка работы Postfix

- Отправка на сервере под учётной записью пользователя себе письма, используя утилиту mail.

![](./image/6.png)

## Проверка работы Postfix

- Запуск на втором терминале мониторинга работы почтовой службы и просмотр действий с сообщением.

![](./image/7.png)

## Проверка работы Postfix

- Проверка файла /var/spool/mail

![](./image/8.png)

## Проверка работы Postfix

- Установка на клиенте необходимого пакета postfix.

![](./image/9.png)

## Проверка работы Postfix

- Отключение IPv6 в списке разрешённых в работе Postfix протоколов (только IPv4), запуск на клиенте Postfix.

![](./image/10.png)

## Проверка работы Postfix

- Отправка себе второго письма, используя утилиту mail.

![](./image/11.png)

## Проверка работы Postfix

- Запуск мониторинга работы почтовой службы.

![](./image/12.png)

## Проверка работы Postfix

- В конфигурации Postfix на сервере просмотрим значения параметров сетевых интерфейсов inet_interfaces и сетевых адресов mynetworks, разрешение Postfix прослушивать соединения не только с локального узла, но и с других интерфейсов сети. Добавление адреса внутренней сети. Перезагрузка конфигурации Postfix и перезапуск Postfix.

![](./image/13.png)

## Проверка работы Postfix

- Повторная отправка сообщения с клиента.

![](./image/14.png)

## Проверка работы Postfix

- Проверка файла /var/spool/mail

![](./image/15.png)

## Конфигурация Postfix для домена

- Отправка с клиента письма на свой доменный адрес.

![](./image/16.png)

## Конфигурация Postfix для домена

- Запуск мониторинга работы почтовой службы.

![](./image/17.png)

## Конфигурация Postfix для домена

- Просмотр сообщений, ожидающих в очереди на отправление.

![](./image/18.png)

## Конфигурация Postfix для домена

- Запись MX-записи с указанием имени почтового сервера mail.anspelov.net в файле прямой DNS-зоны.

![](./image/19.png)

## Конфигурация Postfix для домена

- Запись MX-записи с указанием имени почтового сервера mail.anspelov.net в файле обратной DNS-зоны.

![](./image/20.png)

## Конфигурация Postfix для домена

- Добавление в конфигурации Postfix домена в список элементов сети, для которых данный сервер является конечной точкой доставки почты.

![](./image/21.png)

## Конфигурация Postfix для домена

- Восстановление контекста безопасности в SELinux, перезапуск DNS и попытка отправки сообщений, находящихся в очереди на отправление.

![](./image/22.png)

## Конфигурация Postfix для домена

- Проверка отправки почты с клиента на доменный адрес.

![](./image/23.png)

## Конфигурация Postfix для домена

- Проверка отправки почты с клиента на доменный адрес.

![](./image/24.png)

## Внесение изменений в настройки внутреннего окружения виртуальной машины

- Переход в каталог /vagrant/provision/server/ на виртуальной машине server для внесения изменений в настройки внутреннего окружения. Замена конфигурационных файлов DNS-сервера.

![](./image/25.png)

## Внесение изменений в настройки внутреннего окружения виртуальной машины

- Создание исполняемого файла mail.sh.

![](./image/26.png)

## Внесение изменений в настройки внутреннего окружения виртуальной машины

- Открытие файла на редактирование и добавление скрипта.

![](./image/27.png)

## Внесение изменений в настройки внутреннего окружения виртуальной машины

- Переход в каталог /vagrant/provision/client/ на виртуальной машине client для внесения изменений в настройки внутреннего окружения. Cоздание исполняемого файла mail.sh.

![](./image/28.png)

## Внесение изменений в настройки внутреннего окружения виртуальной машины

- Открытие файла на редактирование и добавление скрипта.

![](./image/29.png)

## Внесение изменений в настройки внутреннего окружения виртуальной машины

- Добавление записи в Vagrantfile в разделе конфигураций для сервера.

![](./image/30.png)

## Внесение изменений в настройки внутреннего окружения виртуальной машины

- Добавление записи в Vagrantfile в разделе конфигураций для клиента.

![](./image/31.png)

# Вывод

## Вывод

- В ходе выполнения лабораторной работы были получены навыки по установке и конфигурированию SMTPсервера.